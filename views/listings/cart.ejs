<% layout("/layouts/boilerplate") %>

<div class="container mt-5 d-flex justify-content-center">
    <div class="card p-4 shadow-lg bg-white" style="width: 480px; max-height: 600px; overflow-y: auto; border-radius: 15px;">
        <!-- Booking Summary Header -->
        <h4 class="text-center mb-3 fw-bold" style="color: #333;">Booking Summary</h4>

        <% if (bookedListings.length === 0) { %>
            <p class="text-center text-muted">No bookings yet. Start exploring amazing places! ✨</p>
        <% } else { %>
            <% bookedListings.forEach(listing => { %>
                <div class="card mb-4 border-0 shadow-sm p-3" style="border-radius: 12px;">
                    <!-- Listing Image & Details -->
                    <div class="d-flex">
                        <div style="width: 130px; height: 130px; flex-shrink: 0; overflow: hidden; border-radius: 10px;">
                            <img src="<%= listing.image.url %>" class="img-fluid" alt="Listing Image"
                                 style="width: 100%; height: 100%; object-fit: cover;">
                        </div>
                        <div class="ms-3 flex-grow-1 d-flex flex-column justify-content-between">
                            <div>
                                <h5 class="fw-bold mb-1" style="color: #333;"><%= listing.title %></h5>
                                <p class="text-muted mb-1">Entire Home</p>
                            </div>
                            <div>
                                <% if (listing.reviews.length === 0) { %>
                                    <p class="text-muted small">⭐⭐⭐⭐⭐ No reviews yet.</p>
                                <% } else { %>
                                    <p class="text-muted small">⭐ 4.8 (366 Reviews)</p>
                                <% } %>
                            </div>
                        </div>
                    </div>

                    <hr />

                    <!-- Location & Pricing -->
                    <p class="text-muted small mb-1"><b>Location:</b> <%= listing.location %></p>
                    <p class="text-muted small mb-1"><b>Country:</b> <%= listing.country %></p>
                    <p class="fw-bold fs-5" style="color: #fe424d;">₹ <%= listing.price.toLocaleString("en-IN") %></p>

                    <!-- Buttons: Remove & Continue -->
                    <div class="d-flex gap-2 mt-3">
                        <a href="/listings" class="btn w-50 fw-bold rounded-pill text-white" 
                           style="background-color: #fe424d; transition: 0.3s;">Remove</a>
                        <a href="/listings" class="btn w-50 fw-bold rounded-pill btn-success" 
                           style="transition: 0.3s;">Continue</a>
                    </div>
                </div>
            <% }) %>
        <% } %>
    </div>
</div>
